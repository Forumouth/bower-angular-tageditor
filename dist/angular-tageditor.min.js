(function(){angular.module("ngTagEditor.controller",[]).controller("ngTagEditorController",["$scope",function(e){var t,n,l;return t=function(t){if(!(t instanceof Array)&&t)throw new Error("ngModel should be an array or empty");return e.ngModel?void 0:e.ngModel=[]},e.$watch("ngModel",t),t(e.ngModel),l=function(){return e.insertTag(e.ngModel.length,e.tmpHolder),delete e.tmpHolder},n=function(){return e.removeTag(e.ngModel.length-1)},e.removeTag=function(t){var n,l,a;return e.editorClass.maxTagNumExceeded=!1,a=e.ngModel.splice(t,1),n={index:t,value:a},l=e.tagChange(n),l=e.tagDel(n)||l,null===l?e.styles.splice(t,1):l?e.styles[t]=l:e.styles.pop()},e.insertTag=function(t,n){var l,a;return!e.tagMaxLength||e.ngModel.length<e.tagMaxLength?(a=e.ngModel.splice(t,e.ngModel.length,n),e.ngModel=e.ngModel.concat(a),l={index:t,value:n},e.styles[t]=e.tagChange(l)||e.styles[t],e.styles[t]=e.tagAdd(l)||e.styles[t]):e.editorClass.maxTagNumExceeded=!0},e.blur=function(){return e.tmpHolder?l():void 0},e.keydown=function(t){if(8===t.keyCode){if(!e.tmpHolder)return n(),t.preventDefault()}else if(9===t.keyCode)return e.blur(),t.preventDefault()},e.styles=[],e.editorClass={maxTagNumExceeded:e.ngModel.length>=e.tagMaxLength},e.ngModel.forEach(function(t,n){var l;return l=e.tagStyle({value:t,index:n}),l?e.styles[n]=l:void 0})}])}).call(this),function(){angular.module("ngTagEditor",["ngTagEditor.controller"]).directive("ngTagEditor",[function(){return{restrict:"AC",scope:{ngModel:"=",tagChange:"&",tagAdd:"&",tagDel:"&",tagStyle:"&",textMaxLength:"=",tagMaxLength:"=",placeholder:"@"},replace:!0,template:'<ul> <li class="tag" data-ng-repeat="item in ngModel track by $index" data-ng-style="styles[$index]"> <span class="tag-body">{{ item }}</span> <a href="javascript:void(0)" class="remove-tag" data-ng-click="removeTag($index)" >&times;</a> </li> <li class="editor"> <input class="editor" data-ng-model="tmpHolder" data-ng-class="editorClass" placeholder="{{ placeholder }}" maxlength="{{ textMaxLength }}" size="{{tmpHolder.length || placeholder.length || 10}}" data-ng-keydown="keydown($event)" data-ng-blur="blur()"> </li> </ul>',controller:"ngTagEditorController"}}])}.call(this);