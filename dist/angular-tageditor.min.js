(function(){angular.module("ngTagEditor.controller",[]).controller("ngTagEditorController",["$scope","$compile",function(e,t){var n,a,l;return n=function(t){if(!(t instanceof Array)&&t)throw new Error("ngModel should be an array or empty");return e.ngModel?void 0:e.ngModel=[]},e.$watch("ngModel",n),n(e.ngModel),l=function(){return e.insertTag(e.ngModel.length,e.tmpHolder),delete e.tmpHolder},a=function(){return e.removeTag(e.ngModel.length-1)},e.removeTag=function(t){var n,a,l;return e.editorClass.maxTagNumExceeded=!1,l=e.ngModel.splice(t,1),n={index:t,value:l},a=e.tagChange(n),a=e.tagDel(n)||a,null===a?e.styles.splice(t,1):a?e.styles[t]=a:e.styles.pop()},e.insertTag=function(t,n){var a,l;return!e.tagMaxLength||e.ngModel.length<e.tagMaxLength?(l=e.ngModel.splice(t,e.ngModel.length,n),e.ngModel=e.ngModel.concat(l),a={index:t,value:n},e.styles[t]=e.tagChange(a)||e.styles[t],e.styles[t]=e.tagAdd(a)||e.styles[t]):e.editorClass.maxTagNumExceeded=!0},e.blur=function(){return void 0!==e.tmpHolder&&(e.tmpHolder=e.tmpHolder.trim(),e.tmpHolder)?l():void 0},e.keydown=function(t){if(8===t.keyCode){if(!e.tmpHolder)return a(),t.preventDefault()}else if(9===t.keyCode)return e.blur(),t.preventDefault()},e.styles=[],e.editorClass={maxTagNumExceeded:e.ngModel.length>=e.tagMaxLength},e.$watch("measure.offsetWidth",function(t){return e.editorStyle.width=t+"px"}),e.editorStyle={width:"auto"},e.ngModel.forEach(function(t,n){var a;return a=e.tagStyle({value:t,index:n}),a?e.styles[n]=a:void 0})}])}).call(this),function(){angular.module("ngTagEditor",["ngTagEditor.controller"]).directive("ngTagEditor",["$compile",function(e){return{restrict:"AC",scope:{ngModel:"=",tagChange:"&",tagAdd:"&",tagDel:"&",tagStyle:"&",textMaxLength:"=",tagMaxLength:"=",placeholder:"@"},replace:!0,template:'<ul> <li class="tag" data-ng-repeat="item in ngModel track by $index" data-ng-style="styles[$index]"> <span class="tag-body">{{ item }}</span> <a href="javascript:void(0)" class="remove-tag" data-ng-click="removeTag($index)" >&times;</a> </li> <li class="editor"> <input class="editor" data-ng-model="tmpHolder" data-ng-class="editorClass" data-ng-style="editorStyle" data-ng-trim="false" placeholder="{{ placeholder }}" maxlength="{{ textMaxLength }}" data-ng-keydown="keydown($event)" data-ng-blur="blur()"> </li> </ul>',controller:"ngTagEditorController",link:function(t,n){var a;return t.__measure_style__={opacity:0,"white-space":"pre",visibility:"hidden",position:"absolute"},a=e(angular.element('<span class="editor measure" data-ng-style="__measure_style__"> {{ tmpHolder || placeholder }} </span>'))(t),n.append(a),t.measure=a[0]}}}])}.call(this);